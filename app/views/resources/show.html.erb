<div id="show">

<%= javascript_include_tag "show" %>

<% if @resource == nil %>
    <div id="show-title">
        <h2>This page does not exist!</h2>
        <p>It might have previously existed, but is no longer available.</p>
    </div>
<% else %>
    <div id="show-title">
        <h2><%= @resource["title"] %></h2>
    </div>

    <div class="links" %>
        <% if user_signed_in? %>
            <% all_values = @all_values_hash %>
            <%= link_to('Edit', edit_resource_path(@resource), class: "btn btn-outline-primary") %>
            
            <% if @resource["approval_status"] == 0 %>
                <a class="nav-item btn btn-outline-primary" href="/resources/unapproved.html">View in approval queue</a>
            <% end %> 

            <% if @resource["approval_status"] != 2 %>
                <%= button_to 'Archive', resources_archive_path(@resource), data: { confirm: "Are you sure you want to move this resource to the archive?", id: @resource["id"] } , class: "btn btn-outline-primary btn-archive", id: @resource["id"] %>
            <% else %>
                <a class="nav-item btn btn-outline-primary" href="/resources/archived.html">View in archive</a>
            <% end %> 
        <% else %>
            <% all_values = @all_public_values_hash %>
        <% end %> 
    </div>

    <div id="resource_info">
        <% i = 0 %>
        <% all_values.map do |key, value| %>
            <% text = @resource[value]%>
            <% if (@has_many_hash.key?(value)) %>
                <% text = text.to_s.gsub(/[^0-9A-Za-z,\s,\-,\&]/, "") %>
            <% end %>
            <% if (text != nil && text.to_s.length != 0) %>
                <% if (i % 2 === 1) %>
                    <div class="text colored">
                <% else %>
                    <div class="text">
                <% end %>
                    <p>
                        <b><%= key.to_s + ": "%></b> 
                        <% if (key.to_s === "URL") %>
                            <a href="<%= text.to_s %>" target="_blank"><%= text.to_s %></a>
                        <% elsif (key.to_s === "Location") %>
                            <%= text.to_s.gsub(",", ", ") %>
                        <% elsif (key.to_s === "Deadline" || key.to_s === "Created on" || key.to_s === "Updated on") %>
                            <%= text.to_s.to_date() %>
                        <% else %>
                            <%= text.to_s %>
                        <% end %>
                    </p>
                </div>
                <% i += 1 %>
            <% end %>
            
        <% end %>
    </div>
<% end %>

</div>